<div class="container">
  <app-header></app-header>
  <div class="row">
    <nav class="nav nav-tabs mt-3 ">
      <a routerLink="/search" routerLinkActive="passive" class="nav-item nav-link">
        <i class="bi-house-door"></i> Search
      </a>
      <a routerLink="/search/response" routerLinkActive="active" class="nav-item nav-link">
        <i class="bi-person"></i> Search Result
      </a>
    </nav>
  </div>

  <router-outlet></router-outlet>
</div>

<div class="container">
  <div class="mt-4 table-wrapper-scroll-y my-custom-scrollbar">
    <!-- Test accordion-->
    <div class="accordion accordion-flush" id="accordion">
      <div *ngFor="let responses of searchResponses | keyvalue let i = index">
        <div class="accordion-item" *ngFor="let response of responses.value['data'] | paginate : {
                itemsPerPage: tableSize,
                currentPage: page,
                totalItems: count
              };
        let j = index" [class.active]="j == j">
          <h2 class="accordion-header" [attr.id]="'flush-heading'+j">
            <button class="accordion-button collapsed" type="button" [attr.data-bs-toggle]="'collapse'" [attr.data-bs-target]="'#flush-collapse'+j" [attr.aria-expanded]="'false'" [attr.aria-controls]="'flush-collapse'+j">
              {{responses.key}}
            </button>
          </h2>
          <div [attr.id]="'flush-collapse'+j" class="accordion-collapse collapse" [attr.aria-labelledby]="'flush-heading'+j" [attr.data-bs-parent]="'#accordion'">
            <div class="accordion-body" *ngFor="let data of response.data | keyvalue let i = index">
              <strong>{{data.key}} -> {{data.value}}</strong><br>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="d-flex justify-content-center">
    <pagination-controls
      previousLabel="Prev"
      nextLabel="Next"
      (pageChange)="onTableDataChange($event)">
    </pagination-controls>
  </div>
</div>

